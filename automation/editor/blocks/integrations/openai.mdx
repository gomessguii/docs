---
title: OpenAI
---

import { LoomVideo } from '/snippets/loom-video.mdx'

## Criar chat completion

Com o bloco OpenAI, você pode criar um chat completion com base nas consultas do usuário e exibir a resposta de volta para o seu fluxo.

<Frame>
  <img
    src="/images/automation/blocks/integrations/openai/overview.png"
    alt="OpenAI block"
    className="rounded-lg"
  />
</Frame>

Esta integração vem com um tipo de mensagem conveniente chamado Diálogo. Isso permite que você passe facilmente uma sequência de histórico de mensagens salvas do assistente/usuário para a OpenAI:

<Frame>
  <img
    src="/images/automation/blocks/integrations/openai/append-to-history.png"
    alt="OpenAI messages sequence"
    className="rounded-lg"
  />
</Frame>

Então você pode dar acesso ao bloco OpenAI a esta sequência de mensagens:

<Frame>
  <img
    src="/images/automation/blocks/integrations/openai/dialogue-usage.png"
    alt="OpenAI messages sequence"
    className="rounded-lg"
  />
</Frame>

### Ferramentas

A seção de ferramentas permite adicionar funções que o modelo OpenAI pode executar. Aqui está um exemplo de uma função chamada `getWeather` que retorna 'Ensolarado e quente' se você perguntar sobre o clima de Paris e 'Chuvoso e frio' se perguntar por qualquer outra cidade 

Um exemplo mais útil seria, é claro, chamar uma API para obter o clima da cidade sobre a qual o usuário está perguntando.

<Frame>
  <img
    src="/images/automation/blocks/integrations/openai/tools.png"
    alt="Ferramentas OpenAI"
    className="rounded-lg"
  />
</Frame>

Como você pode ver, o bloco de código espera o corpo da função JavaScript. Você deve usar a palavra-chave `return` para retornar o valor a ser devolvido para a OpenAI como resultado da função.

Se desejar definir variáveis diretamente neste bloco de código, você pode usar a [função `setVariable`](../logic/script#setvariable-function).

## Perguntar ao assistente

Esta ação permite conversar com seu [assistente OpenAI](https://platform.openai.com/assistants). Tudo que você precisa fazer é fornecer seu ID.

<Frame>
  <img
    src="/images/automation/blocks/integrations/openai/ask-assistant.png"
    alt="OpenAI ask assistant settings"
    className="rounded-lg"
  />
</Frame>

### Funções

Se você definiu funções em seu assistente, pode definir a função a ser executada na seção `Funções`.

## Criar fala

Esta ação permite transformar uma entrada de texto em uma URL de áudio que você pode reutilizar em seu bot.

:::note
As URLs de áudio geradas são temporárias e expiram após 7 dias. Se precisar armazená-las, certifique-se de baixá-las antes que expirem.
:::

<LoomVideo id="ccca6cbf16ed4d01b513836775db06a3" />

## Usando Múltiplos Blocos Open AI: Dicas e Truques

Neste vídeo, discuto algumas coisas importantes a ter em mente ao usar múltiplos blocos Open AI consecutivamente. Forneço um exemplo onde pedimos ao usuário um tópico, geramos um resumo e exibimos uma lista de autores.

Explico que transmitir mensagens não é possível quando elas são prefixadas ou sufixadas por texto, e que todos os blocos precisam ser computados antes de exibir qualquer coisa.

Também demonstro como a formatação pode ser afetada pela presença de texto antes de uma mensagem. Assista a este vídeo para aprender como otimizar o uso de múltiplos blocos Open AI.

<LoomVideo id="35dc8af6b9244762acc4a5acf275fb43" />

## Solução de Problemas

### Mensagem de erro: "Bloco OpenAI retornou um erro"

Isso significa que seu bloco OpenAI não está configurado corretamente. Por favor, verifique o seguinte:

- Você selecionou uma conta OpenAI
- Você tem pelo menos 1 mensagem de usuário ou uma mensagem de Diálogo configurada.

### Retorna uma mensagem vazia

Isso provavelmente significa que você excedeu sua cota gratuita da OpenAI. Adicione um método de pagamento à sua conta OpenAI para continuar usando-a.
